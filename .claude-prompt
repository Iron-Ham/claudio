# Task: Implement BuildConsolidationContext method

## Part of Ultra-Plan: Create prompt_adapter.go with PromptAdapter struct and converter methods that bridge orchestrator types to prompt.Context, enabling the existing but unused prompt.Builder infrastructure to be used for prompt generation instead of manual string concatenation

## Your Task

Add BuildConsolidationContext method to PromptAdapter:
1. Accepts mainBranch string parameter (from config)
2. Creates prompt.Context with Phase=PhaseConsolidation
3. Populates Plan using planInfoFromPlanSpec
4. Populates Consolidation using consolidationInfoFromSession
5. Sets MainBranch on ConsolidationInfo
6. Populates PreviousGroupContext strings
7. Calls ctx.Validate() before returning

## Expected Files

You are expected to work with these files:
- internal/orchestrator/prompt_adapter.go

## Context from Previous Group

This task builds on work consolidated from Group 2.

**Consolidator Notes**: Successfully consolidated 5 tasks that add PromptAdapter infrastructure for bridging orchestrator types to prompt.Context. The consolidated code includes: (1) revision and synthesis info converters from task-2, (2) group context and consolidation converters from task-3, (3) candidatePlanInfoFromPlanSpec for multi-pass planning from task-4, (4) BuildPlanningContext method with error sentinels from task-5, and (5) BuildSynthesisContext method with planInfoWithCommitCounts and buildPreviousGroupContextStrings helpers from task-7. There are some intentionally unused functions (converter helpers) that will be integrated in future prompt building work.

**Important**: The previous group's consolidator flagged these issues:
- Several converter functions (revisionInfoFromState, synthesisInfoFromCompletion, groupContextFromCompletion, consolidationInfoFromSession, candidatePlanInfoFromPlanSpec) are currently unused - these are infrastructure for future prompt.Builder integration
- The PromptAdapter has both ErrNilUltraPlanSession and ErrNilSession error sentinels which serve similar but distinct purposes - task-5 uses ErrNilUltraPlanSession for BuildPlanningContext, while task-7 uses ErrNilManager and ErrNilSession for BuildSynthesisContext
- Consider adding a helper method to extract common context fields (SessionID, Objective, BaseDir) to reduce duplication between Build*Context methods in future work

The consolidated code from the previous group has been verified (build/lint/tests passed).

## Guidelines

- Focus only on this specific task
- Do not modify files outside of your assigned scope unless necessary
- Commit your changes before writing the completion file

## Completion Protocol

When your task is complete, you MUST write a completion file to signal the orchestrator:

1. Use Write tool to create `.claudio-task-complete.json` in your worktree root
2. Include this JSON structure:
```json
{
  "task_id": "task-9-consolidation-context",
  "status": "complete",
  "summary": "Brief description of what you accomplished",
  "files_modified": ["list", "of", "files", "you", "changed"],
  "notes": "Any implementation notes for the consolidation phase",
  "issues": ["Any concerns or blocking issues found"],
  "suggestions": ["Suggestions for integration with other tasks"],
  "dependencies": ["Any new runtime dependencies added"]
}
```

3. Use status "blocked" if you cannot complete (explain in issues), or "failed" if something broke
4. This file signals that your work is done and provides context for consolidation
